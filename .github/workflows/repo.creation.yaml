name: "Automate Repo Creation"
on:
 issues:
   types: [opened]
jobs:
 create-repo:
   #if: contains(github.event.issue.labels.*.name, 'repo-request')
   runs-on: ubuntu-latest
   steps:
     - name: Extract issue data
       id: extract
       run: |
         echo "::set-output name=repo_name::$(echo '${{ github.event.issue.body }}' | grep 'Repository Name' | cut -d':' -f2 | xargs)"
         echo "::set-output name=repo_description::$(echo '${{ github.event.issue.body }}' | grep 'Repository Description' | cut -d':' -f2 | xargs)"
         echo "::set-output name=repo_visibility::$(echo '${{ github.event.issue.body }}' | grep 'Repository Visibility' | cut -d':' -f2 | xargs | tr '[:upper:]' '[:lower:]')"
         echo ${{ secrets.CREATE_REPO_SECRET }}
     - name: Create repository using GitHub API
       env:
         GITHUB_TOKEN: ${{ secrets.CREATE_REPO_SECRET }}
       run: |
         curl -X POST -H "Authorization: token $GITHUB_TOKEN" \
          -d '{
            "name": "test-workflow",
            "description": "test creation of repo through work-flow",
            "private": 'true'
          }' https://api.github.com/GCoder-tech/
